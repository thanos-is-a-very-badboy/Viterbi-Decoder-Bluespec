/*
 * Generated by Bluespec Compiler, version 2021.12.1 (build fd501401)
 * 
 * On Fri Oct 31 02:02:27 IST 2025
 * 
 */
#include "bluesim_primitives.h"
#include "model_mkViterbiTestbench.h"

#include <cstdlib>
#include <time.h>
#include "bluesim_kernel_api.h"
#include "bs_vcd.h"
#include "bs_reset.h"


/* Constructor */
MODEL_mkViterbiTestbench::MODEL_mkViterbiTestbench()
{
  mkViterbiTestbench_instance = NULL;
}

/* Function for creating a new model */
void * new_MODEL_mkViterbiTestbench()
{
  MODEL_mkViterbiTestbench *model = new MODEL_mkViterbiTestbench();
  return (void *)(model);
}

/* Schedule functions */

static void schedule_posedge_CLK(tSimStateHdl simHdl, void *instance_ptr)
       {
	 MOD_mkViterbiTestbench &INST_top = *((MOD_mkViterbiTestbench *)(instance_ptr));
	 tUInt8 DEF_INST_top_INST_viterbi_DEF_init_done_flag___d3;
	 tUInt8 DEF_INST_top_INST_viterbi_DEF_CAN_FIRE_RL_init_v;
	 tUInt8 DEF_INST_top_INST_viterbi_DEF_WILL_FIRE_RL_init_v;
	 tUInt8 DEF_INST_top_INST_viterbi_DEF_CAN_FIRE_RL_done_init;
	 tUInt8 DEF_INST_top_INST_viterbi_DEF_WILL_FIRE_RL_done_init;
	 tUInt8 DEF_INST_top_DEF_read_transition_tb___d7;
	 tUInt8 DEF_INST_top_DEF_CAN_FIRE_RL_load_m_and_n;
	 tUInt8 DEF_INST_top_DEF_WILL_FIRE_RL_load_m_and_n;
	 tUInt8 DEF_INST_top_DEF_CAN_FIRE_RL_read_66;
	 tUInt8 DEF_INST_top_DEF_WILL_FIRE_RL_read_66;
	 tUInt8 DEF_INST_top_DEF_CAN_FIRE_RL_read_transition_matrix;
	 tUInt8 DEF_INST_top_DEF_WILL_FIRE_RL_read_transition_matrix;
	 INST_top.INST_viterbi.METH_RDY_get_n_and_m_loaded();
	 INST_top.INST_viterbi.METH_RDY_n_and_m_load();
	 DEF_INST_top_DEF_CAN_FIRE_RL_load_m_and_n = (tUInt8)1u;
	 DEF_INST_top_DEF_WILL_FIRE_RL_load_m_and_n = DEF_INST_top_DEF_CAN_FIRE_RL_load_m_and_n;
	 DEF_INST_top_DEF_read_transition_tb___d7 = INST_top.INST_read_transition_tb.METH_read();
	 DEF_INST_top_DEF_CAN_FIRE_RL_read_66 = INST_top.INST_viterbi.METH_get_read_transition() && !DEF_INST_top_DEF_read_transition_tb___d7;
	 DEF_INST_top_DEF_WILL_FIRE_RL_read_66 = DEF_INST_top_DEF_CAN_FIRE_RL_read_66;
	 INST_top.INST_viterbi.METH_RDY_send_transition_data();
	 DEF_INST_top_DEF_CAN_FIRE_RL_read_transition_matrix = DEF_INST_top_DEF_read_transition_tb___d7;
	 DEF_INST_top_DEF_WILL_FIRE_RL_read_transition_matrix = DEF_INST_top_DEF_CAN_FIRE_RL_read_transition_matrix;
	 DEF_INST_top_INST_viterbi_DEF_init_done_flag___d3 = INST_top.INST_viterbi.INST_init_done_flag.METH_read();
	 DEF_INST_top_INST_viterbi_DEF_CAN_FIRE_RL_done_init = DEF_INST_top_INST_viterbi_DEF_init_done_flag___d3;
	 DEF_INST_top_INST_viterbi_DEF_WILL_FIRE_RL_done_init = DEF_INST_top_INST_viterbi_DEF_CAN_FIRE_RL_done_init;
	 INST_top.INST_viterbi.DEF_x__h6556 = INST_top.INST_viterbi.INST_t_ctr.METH_read();
	 INST_top.INST_viterbi.DEF_n_and_m_loaded__h4719 = INST_top.INST_viterbi.INST_n_and_m_loaded.METH_read();
	 DEF_INST_top_INST_viterbi_DEF_CAN_FIRE_RL_init_v = ((INST_top.INST_viterbi.DEF_x__h6556) == 0u && !DEF_INST_top_INST_viterbi_DEF_init_done_flag___d3) && INST_top.INST_viterbi.DEF_n_and_m_loaded__h4719;
	 DEF_INST_top_INST_viterbi_DEF_WILL_FIRE_RL_init_v = DEF_INST_top_INST_viterbi_DEF_CAN_FIRE_RL_init_v;
	 if (DEF_INST_top_DEF_WILL_FIRE_RL_read_66)
	   INST_top.RL_read_66();
	 if (DEF_INST_top_INST_viterbi_DEF_WILL_FIRE_RL_done_init)
	   INST_top.INST_viterbi.RL_done_init();
	 if (DEF_INST_top_INST_viterbi_DEF_WILL_FIRE_RL_init_v)
	   INST_top.INST_viterbi.RL_init_v();
	 if (DEF_INST_top_DEF_WILL_FIRE_RL_load_m_and_n)
	   INST_top.RL_load_m_and_n();
	 if (DEF_INST_top_DEF_WILL_FIRE_RL_read_transition_matrix)
	   INST_top.RL_read_transition_matrix();
	 if (do_reset_ticks(simHdl))
	 {
	   INST_top.INST_viterbi.INST_adder.INST_done1.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_adder.INST_done2.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_adder.INST_done3.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_adder.INST_res.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_adder.INST_new_exp.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_adder.INST_shifted_mantissa_1.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_adder.INST_shifted_mantissa_2.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_adder.INST_final_mantissa.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_adder.INST_guard1.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_adder.INST_sticky1.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_adder.INST_man_carry.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_adder.INST_diff_reg.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_n_reg.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_m_reg.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_i_ctr.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_j_ctr.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_t_ctr.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_input_idx_ctr.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_outcome_reg.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_transition_buffer.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_emission_buffer.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_outcome_buffer.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_transition_idx.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_emission_idx.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_outcome_idx.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_0.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_1.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_2.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_3.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_4.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_5.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_6.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_7.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_8.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_9.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_10.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_11.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_12.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_13.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_14.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_15.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_16.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_17.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_18.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_19.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_20.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_21.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_22.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_23.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_24.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_25.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_26.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_27.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_28.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_29.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_30.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_prev_31.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_0.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_1.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_2.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_3.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_4.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_5.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_6.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_7.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_8.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_9.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_10.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_11.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_12.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_13.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_14.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_15.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_16.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_17.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_18.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_19.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_20.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_21.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_22.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_23.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_24.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_25.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_26.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_27.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_28.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_29.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_30.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_curr_31.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_read_transition.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_read_emission.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_read_outcome.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_n_and_m_loaded.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_transition_ready.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_emission_ready.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_init_in_progress.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_viterbi.INST_init_done_flag.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_read_transition_tb.rst_tick__clk__1((tUInt8)1u);
	   INST_top.INST_transition_idx_tb.rst_tick__clk__1((tUInt8)1u);
	 }
       };

/* Model creation/destruction functions */

void MODEL_mkViterbiTestbench::create_model(tSimStateHdl simHdl, bool master)
{
  sim_hdl = simHdl;
  init_reset_request_counters(sim_hdl);
  mkViterbiTestbench_instance = new MOD_mkViterbiTestbench(sim_hdl, "top", NULL);
  bk_get_or_define_clock(sim_hdl, "CLK");
  if (master)
  {
    bk_alter_clock(sim_hdl, bk_get_clock_by_name(sim_hdl, "CLK"), CLK_LOW, false, 0llu, 5llu, 5llu);
    bk_use_default_reset(sim_hdl);
  }
  bk_set_clock_event_fn(sim_hdl,
			bk_get_clock_by_name(sim_hdl, "CLK"),
			schedule_posedge_CLK,
			NULL,
			(tEdgeDirection)(POSEDGE));
  (mkViterbiTestbench_instance->INST_viterbi.INST_adder.set_clk_0)("CLK");
  (mkViterbiTestbench_instance->INST_viterbi.set_clk_0)("CLK");
  (mkViterbiTestbench_instance->set_clk_0)("CLK");
}
void MODEL_mkViterbiTestbench::destroy_model()
{
  delete mkViterbiTestbench_instance;
  mkViterbiTestbench_instance = NULL;
}
void MODEL_mkViterbiTestbench::reset_model(bool asserted)
{
  (mkViterbiTestbench_instance->reset_RST_N)(asserted ? (tUInt8)0u : (tUInt8)1u);
}
void * MODEL_mkViterbiTestbench::get_instance()
{
  return mkViterbiTestbench_instance;
}

/* Fill in version numbers */
void MODEL_mkViterbiTestbench::get_version(char const **name, char const **build)
{
  *name = "2021.12.1";
  *build = "fd501401";
}

/* Get the model creation time */
time_t MODEL_mkViterbiTestbench::get_creation_time()
{
  
  /* Thu Oct 30 20:32:27 UTC 2025 */
  return 1761856347llu;
}

/* State dumping function */
void MODEL_mkViterbiTestbench::dump_state()
{
  (mkViterbiTestbench_instance->dump_state)(0u);
}

/* VCD dumping functions */
MOD_mkViterbiTestbench & mkViterbiTestbench_backing(tSimStateHdl simHdl)
{
  static MOD_mkViterbiTestbench *instance = NULL;
  if (instance == NULL)
  {
    vcd_set_backing_instance(simHdl, true);
    instance = new MOD_mkViterbiTestbench(simHdl, "top", NULL);
    vcd_set_backing_instance(simHdl, false);
  }
  return *instance;
}
void MODEL_mkViterbiTestbench::dump_VCD_defs()
{
  (mkViterbiTestbench_instance->dump_VCD_defs)(vcd_depth(sim_hdl));
}
void MODEL_mkViterbiTestbench::dump_VCD(tVCDDumpType dt)
{
  (mkViterbiTestbench_instance->dump_VCD)(dt,
					  vcd_depth(sim_hdl),
					  mkViterbiTestbench_backing(sim_hdl));
}
